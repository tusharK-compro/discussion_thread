<h1><%= @post.title %></h1>
<p>By: <%= @post.user.email %></p>

<p><%= @post.description %></p>

<hr>

<h3>Replies</h3>

<% @post.replies.each do |reply| %>
  <div>
    <p><strong><%= reply.user.name %></strong> (<%= reply.user.email %>) says:</p>
    <p><%= reply.content %></p>
    <small><%= time_ago_in_words(reply.created_at) %> ago</small>
  </div>

<% end %>

<% if logged_in? %>
  <h4>Add a reply:</h4>
  <%= form_with(model: [@post, @post.replies.build], local: true) do |form| %>
    <div>
      <%= form.label :content, "Your Reply" %><br>
      <%= form.text_area :content, rows: 4 %>
    </div>
    <div>
      <%= form.submit "Post Reply" %>
    </div>
  <% end %>
<% else %>
  <p><%= link_to "Log in", login_path %> to post a reply.</p>
<% end %>


<%= link_to "Back to all posts", posts_path %>